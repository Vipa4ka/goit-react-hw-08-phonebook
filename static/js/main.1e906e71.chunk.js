(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{27:function(t,e,n){t.exports={li:"ContactList_li___DVp4",ul:"ContactList_ul__3-wI9",button:"ContactList_button__1vHKq"}},31:function(t,e,n){t.exports={label:"Filter_label__3Hdua",input:"Filter_input__iabIq"}},42:function(t,e,n){t.exports={container:"Container_container__2BjZM"}},54:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(22),i=n.n(r),s=n(17),o=n(11),u=n(41),l=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))},b=(n(53),n(54),n(4)),j=n(42),d=n.n(j),f=n(1),O=function(t){var e=t.children;return Object(f.jsx)("div",{className:d.a.container,children:e})},h={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},p=function(){return Object(f.jsx)("nav",{children:Object(f.jsx)(s.b,{to:"/",exact:!0,style:h.link,activeStyle:h.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})},x={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},m=function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(f.jsxs)("div",{style:x.container,children:[Object(f.jsx)("img",{src:e,alt:"",width:"32",style:x.avatar}),Object(f.jsxs)("span",{style:x.name,children:["Welcome, ",n]}),Object(f.jsx)("button",{type:"button",onClick:c,children:"Logout"})]})},v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},g=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(s.b,{to:"/register",exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsx)(s.b,{to:"/login",exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},y={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},C=function(t){var e=t.isAuthenticated;return Object(f.jsxs)("header",{style:y.header,children:[Object(f.jsx)(p,{}),e?Object(f.jsx)(m,{}):Object(f.jsx)(g,{})]})},w={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},k=function(){return Object(f.jsx)("div",{style:w.container,children:Object(f.jsxs)("h1",{style:w.title,children:["\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430"," ",Object(f.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]})})},_=n(18),L=n(6),S=n.n(L),F=n(15),D=n(14),I=n.n(D),B=n(3);I.a.defaults.baseURL="https://connections-api.herokuapp.com";var A={register:Object(B.c)("auth/register",function(){var t=Object(F.a)(S.a.mark((function t(e){var n,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(B.c)("auth/login",function(){var t=Object(F.a)(S.a.mark((function t(e){var n,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(B.c)("auth/logout",Object(F.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("/users/logout");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))),fetchCurrentUser:Object(B.c)("auth/refresh",function(){var t=Object(F.a)(S.a.mark((function t(e,n){var c,a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==c.auth.token){t.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),t.abrupt("return",n.rejectWithValue());case 5:return t.prev=5,t.next=8,I.a.get("/users/current");case 8:return a=t.sent,r=a.data,t.abrupt("return",r);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},E=Object(B.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:{}}).reducer,R={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function N(){var t=Object(o.c)(),e=Object(c.useState)(""),n=Object(_.a)(e,2),a=n[0],r=n[1],i=Object(c.useState)(""),s=Object(_.a)(i,2),u=s[0],l=s[1],b=Object(c.useState)(""),j=Object(_.a)(b,2),d=j[0],O=j[1],h=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":return r(c);case"email":return l(c);case"password":return O(c);default:return}};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(A.register({name:a,email:u,password:d})),r(""),l(""),O("")},style:R.form,autoComplete:"off",children:[Object(f.jsxs)("label",{style:R.label,children:["\u0418\u043c\u044f",Object(f.jsx)("input",{type:"text",name:"name",value:a,onChange:h})]}),Object(f.jsxs)("label",{style:R.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(f.jsx)("input",{type:"email",name:"email",value:u,onChange:h})]}),Object(f.jsxs)("label",{style:R.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(f.jsx)("input",{type:"password",name:"password",value:d,onChange:h})]}),Object(f.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var W={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function q(){var t=Object(o.c)(),e=Object(c.useState)(""),n=Object(_.a)(e,2),a=n[0],r=n[1],i=Object(c.useState)(""),s=Object(_.a)(i,2),u=s[0],l=s[1],b=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"email":return r(c);case"password":return l(c);default:return}};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(A.logIn({email:a,password:u})),r(""),l("")},style:W.form,autoComplete:"off",children:[Object(f.jsxs)("label",{style:W.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(f.jsx)("input",{type:"email",name:"email",value:a,onChange:b})]}),Object(f.jsxs)("label",{style:W.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(f.jsx)("input",{type:"password",name:"password",value:u,onChange:b})]}),Object(f.jsx)("button",{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var V,H,T,U=n(27),z=n.n(U),J=Object(B.b)("contacts/fetchContactsRequest"),M=Object(B.b)("contacts/fetchContactsSuccess"),P=Object(B.b)("contacts/fetchContactsError"),K=Object(B.b)("contacts/addContactsRequest"),Z=Object(B.b)("contacts/addContactsSuccess"),G=Object(B.b)("contacts/addContactsError"),Q=Object(B.b)("contacts/deleteContactsRequest"),X=Object(B.b)("contacts/deleteContactsSuccess"),Y=Object(B.b)("contacts/deleteContactsError"),$=Object(B.b)("contacts/changeFilter"),tt=function(t){return function(){var e=Object(F.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(Q()),I.a.delete("/contacts/".concat(t)).then((function(){return n(X(t))})).catch((function(t){return n(Y(t))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},et=function(){return function(){var t=Object(F.a)(S.a.mark((function t(e){var n,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(J()),t.prev=1,t.next=4,I.a.get("/contacts");case 4:n=t.sent,c=n.data,e(M(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(P(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},nt=n(24),ct=function(t){return t.contacts.filter},at={getLoading:function(t){return t.contacts.loading},getFilter:ct,getVisibleContacts:Object(nt.a)([function(t){return t.contacts.items},ct],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},rt=n(7),it=n(26),st=n(5),ot=Object(B.d)([],(V={},Object(rt.a)(V,M,(function(t,e){return e.payload})),Object(rt.a)(V,Z,(function(t,e){var n=e.payload;return t.some((function(t){return t.name===n.name}))?(alert("".concat(n.name," is already in contacts.")),t):[].concat(Object(it.a)(t),[n])})),Object(rt.a)(V,X,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),V)),ut=Object(B.d)("",Object(rt.a)({},$,(function(t,e){return e.payload}))),lt=Object(B.d)(!1,(H={},Object(rt.a)(H,J,(function(){return!0})),Object(rt.a)(H,M,(function(){return!1})),Object(rt.a)(H,P,(function(){return!1})),Object(rt.a)(H,K,(function(){return!0})),Object(rt.a)(H,Z,(function(){return!1})),Object(rt.a)(H,G,(function(){return!1})),Object(rt.a)(H,Q,(function(){return!0})),Object(rt.a)(H,X,(function(){return!1})),Object(rt.a)(H,Y,(function(){return!1})),H)),bt=Object(B.d)(null,(T={},Object(rt.a)(T,P,(function(t,e){return e.payload})),Object(rt.a)(T,J,(function(){return null})),T)),jt=Object(st.b)({items:ot,filter:ut,loading:lt,error:bt}),dt=Object(o.b)((function(t){return{contacts:at.getVisibleContacts(t)}}),(function(t){return{onDeleteContacts:function(e){return t(tt(e))}}}))((function(t){var e=t.contacts,n=t.onDeleteContacts;return Object(f.jsx)("ul",{className:z.a.ul,children:e.map((function(t){var e=t.id,c=t.name,a=t.number;return Object(f.jsxs)("li",{className:z.a.li,name:c,children:[c,": ",a,Object(f.jsx)("button",{className:z.a.button,type:"button",onClick:function(){return n(e)},children:"Delete"})]},e)}))})})),ft=n(31),Ot=n.n(ft),ht=Object(o.b)((function(t){return{value:at.getFilter(t)}}),(function(t){return{onChange:function(e){return t($(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(f.jsxs)("label",{className:Ot.a.label,children:["Find contacts by name",Object(f.jsx)("input",{className:Ot.a.input,type:"text",value:e,onChange:n})]})})),pt={display:"flex",alignItems:"flex-end",marginBottom:20};function xt(t){var e=Object(o.c)(),n=Object(o.d)(at.getLoading);return Object(c.useEffect)((function(){return e(et())}),[e]),Object(f.jsxs)(O,{children:[Object(f.jsxs)("div",{style:pt,children:[Object(f.jsx)(ht,{}),n&&Object(f.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."})]}),Object(f.jsx)(dt,{})]})}var mt=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(O,{children:[Object(f.jsx)(C,{}),Object(f.jsxs)(b.c,{children:[Object(f.jsx)(b.a,{path:"/",exact:!0,children:Object(f.jsx)(k,{})}),Object(f.jsx)(b.a,{path:"/register",children:Object(f.jsx)(N,{})}),Object(f.jsx)(b.a,{path:"/login",children:Object(f.jsx)(q,{})}),Object(f.jsx)(b.a,{path:"/contacts",children:Object(f.jsx)(xt,{})})]})]})})},vt=n(44),gt=n.n(vt),yt=n(16),Ct=n(45),wt=n.n(Ct),kt=[].concat(Object(it.a)(Object(B.f)({serializableCheck:{ignoredActions:[yt.a,yt.f,yt.b,yt.c,yt.d,yt.e]}})),[gt.a]),_t={key:"auth",storage:wt.a,whitelist:["token"]},Lt=Object(B.a)({reducer:{auth:Object(yt.g)(_t,E),contacts:jt},middleware:kt,devTools:!1}),St=Object(yt.h)(Lt);i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(o.a,{store:Lt,children:Object(f.jsx)(u.a,{loading:null,persistor:St,children:Object(f.jsx)(s.a,{children:Object(f.jsx)(mt,{})})})})}),document.getElementById("root")),l()}},[[78,1,2]]]);
//# sourceMappingURL=main.1e906e71.chunk.js.map