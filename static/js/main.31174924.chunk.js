(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{28:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"d",(function(){return C})),n.d(e,"c",(function(){return I})),n.d(e,"a",(function(){return v}));var c=n(6),r=n.n(c),a=n(14),o=n(13),u=n.n(o),i=n(3),s=Object(i.b)("contacts/fetchContactsRequest"),l=Object(i.b)("contacts/fetchContactsSuccess"),b=Object(i.b)("contacts/fetchContactsError"),j=Object(i.b)("contacts/addContactsRequest"),d=Object(i.b)("contacts/addContactsSuccess"),f=Object(i.b)("contacts/addContactsError"),h=Object(i.b)("contacts/deleteContactsRequest"),p=Object(i.b)("contacts/deleteContactsSuccess"),O=Object(i.b)("contacts/deleteContactsError"),v=Object(i.b)("contacts/changeFilter");u.a.defaults.baseURL="http://localhost:4040";var x,g,m,k={addContacts:function(t){var e=t.name,n=t.number;return function(){var t=Object(a.a)(r.a.mark((function t(c){var a,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e,number:n},c(j()),t.prev=2,t.next=5,u.a.post("/contacts",a);case 5:o=t.sent,i=o.data,c(d(i)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),c(f(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},deleteContacts:function(t){return function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(h()),u.a.delete("/contacts/".concat(t)).then((function(){return n(p(t))})).catch((function(t){return n(O(t))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchContacts:function(){return function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s()),t.prev=1,t.next=4,u.a.get("/contacts");case 4:n=t.sent,c=n.data,e(l(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(b(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},y=n(22),w=function(t){return t.contacts.filter},C={getLoading:function(t){return t.contacts.loading},getFilter:w,getVisibleContacts:Object(y.a)([function(t){return t.contacts.items},w],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},L=n(7),S=n(23),F=n(5),R=Object(i.d)([],(x={},Object(L.a)(x,l,(function(t,e){return e.payload})),Object(L.a)(x,d,(function(t,e){var n=e.payload;return t.some((function(t){return t.name===n.name}))?(alert("".concat(n.name," is already in contacts.")),t):[].concat(Object(S.a)(t),[n])})),Object(L.a)(x,p,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),x)),A=Object(i.d)("",Object(L.a)({},v,(function(t,e){return e.payload}))),B=Object(i.d)(!1,(g={},Object(L.a)(g,s,(function(){return!0})),Object(L.a)(g,l,(function(){return!1})),Object(L.a)(g,b,(function(){return!1})),Object(L.a)(g,j,(function(){return!0})),Object(L.a)(g,d,(function(){return!1})),Object(L.a)(g,f,(function(){return!1})),Object(L.a)(g,h,(function(){return!0})),Object(L.a)(g,p,(function(){return!1})),Object(L.a)(g,O,(function(){return!1})),g)),E=Object(i.d)(null,(m={},Object(L.a)(m,b,(function(t,e){return e.payload})),Object(L.a)(m,s,(function(){return null})),m)),I=Object(F.b)({items:R,filter:A,loading:B,error:E})},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var c=n(6),r=n.n(c),a=n(14),o=n(13),u=n.n(o),i=n(3);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var s={register:Object(i.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(i.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(i.c)("auth/logout",Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("/users/logout");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))),fetchCurrentUser:Object(i.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==c.auth.token){t.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),t.abrupt("return",n.rejectWithValue());case 5:return t.prev=5,t.next=8,u.a.get("/users/current");case 8:return a=t.sent,o=a.data,t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},l=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:{}}).reducer},40:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(42),r=n.n(c),a=n(1),o=function(t){var e=t.children;return Object(a.jsx)("div",{className:r.a.container,children:e})}},42:function(t,e,n){t.exports={container:"Container_container__2BjZM"}},54:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(20),o=n.n(a),u=n(16),i=n(27),s=n(41),l=function(t){t&&t instanceof Function&&n.e(7).then(n.bind(null,82)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))},b=(n(53),n(54),n(4)),j=n(40),d=n(1),f={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},h=function(){return Object(d.jsx)("nav",{children:Object(d.jsx)(u.b,{to:"/",exact:!0,style:f.link,activeStyle:f.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})},p={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},O=function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(d.jsxs)("div",{style:p.container,children:[Object(d.jsx)("img",{src:e,alt:"",width:"32",style:p.avatar}),Object(d.jsxs)("span",{style:p.name,children:["Welcome, ",n]}),Object(d.jsx)("button",{type:"button",onClick:c,children:"Logout"})]})},v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},x=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(u.b,{to:"/register",exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(d.jsx)(u.b,{to:"/login",exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},g={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},m=function(t){var e=t.isAuthenticated;return Object(d.jsxs)("header",{style:g.header,children:[Object(d.jsx)(h,{}),e?Object(d.jsx)(O,{}):Object(d.jsx)(x,{})]})},k=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,83))})),y=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,84))})),w=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,85))})),C=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,86))}));var L=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(j.a,{children:[Object(d.jsx)(m,{}),Object(d.jsxs)(b.c,{children:[Object(d.jsx)(b.a,{path:"/",exact:!0,children:Object(d.jsx)(k,{})}),Object(d.jsx)(b.a,{path:"/register",children:Object(d.jsx)(y,{})}),Object(d.jsx)(b.a,{path:"/login",children:Object(d.jsx)(w,{})}),Object(d.jsx)(b.a,{path:"/contacts",children:Object(d.jsx)(C,{})})]})]})})},S=n(23),F=n(28),R=n(30),A=n(3),B=n(44),E=n.n(B),I=n(15),z=n(45),W=n.n(z),U=[].concat(Object(S.a)(Object(A.f)({serializableCheck:{ignoredActions:[I.a,I.f,I.b,I.c,I.d,I.e]}})),[E.a]),q={key:"auth",storage:W.a,whitelist:["token"]},D=Object(A.a)({reducer:{auth:Object(I.g)(q,R.b),contacts:F.c},middleware:U,devTools:!1}),T=Object(I.h)(D);o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(i.a,{store:D,children:Object(d.jsx)(s.a,{loading:null,persistor:T,children:Object(d.jsx)(u.a,{children:Object(d.jsx)(L,{})})})})}),document.getElementById("root")),l()}},[[78,5,6]]]);
//# sourceMappingURL=main.31174924.chunk.js.map